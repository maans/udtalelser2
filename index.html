<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Elevudtalelser (v20) ‚Äî toggle-visning, ingen Alle-bruger</title>
  <link rel="stylesheet" href="app.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand" title="Elevudtalelser">
      <span class="logo">üóÇÔ∏è</span>
      <div class="brandtext">
        <div class="title">Elevudtalelser</div>
        <div class="subtitle">v20 ‚Ä¢ toggle-visning ‚Ä¢ uden ‚ÄúAlle-bruger‚Äù</div>
      </div>
    </div>

    <nav class="tabs" aria-label="Faner">
      <button class="tab active" data-tab="data">Data & import</button>
      <button class="tab" data-tab="k">K-elever</button>
      <button class="tab" data-tab="edit">Redig√©r</button>
      <button class="tab" data-tab="settings">Indstillinger</button>
    </nav>

    <div class="top-actions">
      <button id="btnHelp" class="btn ghost" title="Hj√¶lp">‚ùî</button>
      <button id="btnPrint" class="btn" title="Print">üñ®Ô∏è Print</button>
    </div>
  </header>

  <main class="layout">
    <section id="helpPanel" class="help hidden" aria-live="polite">
      <div class="help-inner">
        <div class="help-title">Hj√¶lp (kort)</div>

        <details open>
          <summary>1) Start i Data & import</summary>
          <div class="help-p">
            Indtast dine <b>Initialer</b>. Import√©r derefter <b>students.csv</b> (eller en anden CSV i samme format).
          </div>
        </details>

        <details>
          <summary>2) K-elever: toggle-visning</summary>
          <div class="help-p">
            Brug knappen <b>Vis alle elever</b> til at skifte mellem kun dine K-elever og alle elever.
            Der findes <b>ingen ‚ÄúAlle-bruger‚Äù</b> i denne version.
          </div>
        </details>

        <details>
          <summary>3) Redig√©r en elev</summary>
          <div class="help-p">
            Klik en elev i listen. Udfyld felter og gem automatisk (der gemmes l√∏bende).
            Dine √¶ndringer markeres som <b>redigeret af</b> dine initialer.
          </div>
        </details>

        <details>
          <summary>4) Print</summary>
          <div class="help-p">
            Print-knappen printer <b>alle K-elever</b> ‚Äì eller <b>alle elever</b> hvis du har sl√•et ‚ÄúVis alle elever‚Äù til.
            App-UI skjules i udskrift.
          </div>
        </details>

        <div class="help-actions">
          <button id="btnCloseHelp" class="btn">Luk</button>
        </div>
      </div>
    </section>

    <section class="panel" id="panel-data" data-panel="data">
      <h2>Data & import</h2>

      <div class="grid2">
        <div class="card">
          <h3>Initialer</h3>
          <div class="row">
            <label for="initials">Initialer</label>
            <input id="initials" maxlength="6" placeholder="Fx MM" />
          </div>
          <div class="hint">Bruges til at markere, hvem der har redigeret en elev.</div>
        </div>

        <div class="card">
          <h3>Import</h3>
          <div class="row">
            <label for="fileCsv">Import√©r CSV</label>
            <input id="fileCsv" type="file" accept=".csv,text/csv" />
          </div>
          <div class="row">
            <button id="btnLoadSample" class="btn ghost">Indl√¶s eksempel (students.csv)</button>
            <button id="btnClearAll" class="btn danger">Ryd alle lokale data</button>
          </div>
          <div class="hint">CSV kr√¶ver kolonner: <code>id,navn,klasse,k_initialer</code> (k_initialer kan v√¶re tom).</div>
        </div>
      </div>

      <div class="card">
        <h3>Status</h3>
        <div id="status" class="status">Ingen data indl√¶st endnu.</div>
      </div>
    </section>

    <section class="panel hidden" id="panel-k" data-panel="k">
      <div class="panel-head">
        <h2>K-elever</h2>
        <div class="panel-actions">
          <button id="btnToggleAll" class="btn ghost">Vis alle elever</button>
          <span id="kCount" class="badge">0</span>
        </div>
      </div>

      <div class="toolbar">
        <input id="searchK" placeholder="S√∏g (navn/klasse) ‚Ä¶" />
        <span class="muted" id="kHint"></span>
      </div>

      <div id="kList" class="list"></div>
    </section>

    <section class="panel hidden" id="panel-edit" data-panel="edit">
      <div class="panel-head">
        <h2>Redig√©r</h2>
        <div class="panel-actions">
          <span id="selectedMeta" class="muted"></span>
        </div>
      </div>

      <div id="editEmpty" class="empty">
        V√¶lg en elev i <b>K-elever</b> for at redigere.
      </div>

      <div id="editForm" class="card hidden">
        <div class="grid2">
          <div>
            <div class="row">
              <label>Elev</label>
              <div id="studentName" class="value"></div>
            </div>
            <div class="row">
              <label>Klasse</label>
              <div id="studentClass" class="value"></div>
            </div>
            <div class="row">
              <label>K-initialer (fra CSV)</label>
              <div id="studentK" class="value"></div>
            </div>
          </div>

          <div>
            <div class="row">
              <label>Redigeret af</label>
              <div id="editedBy" class="value"></div>
            </div>
            <div class="row">
              <label>Sidst gemt</label>
              <div id="savedAt" class="value"></div>
            </div>
          </div>
        </div>

        <hr/>

        <div class="row">
          <label for="tmplA">Udtalelse (skabelon / tekst)</label>
          <textarea id="tmplA" rows="10" placeholder="Skriv udtalelsen her‚Ä¶"></textarea>
        </div>

        <div class="row">
          <label for="note">Noter (internt)</label>
          <textarea id="note" rows="4" placeholder="Evt. noter‚Ä¶"></textarea>
        </div>

        <div class="row">
          <button id="btnBackToK" class="btn ghost">‚Üê Tilbage til K-elever</button>
        </div>

        <div class="hint">
          Gemmes l√∏bende i browserens lokale lager. Print bruger den viste liste (K-elever eller alle).
        </div>
      </div>
    </section>

    <section class="panel hidden" id="panel-settings" data-panel="settings">
      <h2>Indstillinger</h2>

      <div class="card">
        <h3>Standard-tekster</h3>
        <div class="row">
          <label for="defaultTemplate">Standard udtalelse</label>
          <textarea id="defaultTemplate" rows="6"></textarea>
        </div>
        <div class="row">
          <button id="btnSaveDefaults" class="btn">Gem standard</button>
          <button id="btnResetDefaults" class="btn ghost">Nulstil standard</button>
        </div>
        <div class="hint">N√•r du opretter en ny elevtekst, startes den med standarden.</div>
      </div>

      <div class="card">
        <h3>Eksport (JSON)</h3>
        <div class="row">
          <button id="btnExport" class="btn ghost">Eksport√©r lokale √¶ndringer</button>
          <input id="fileImportJson" type="file" accept=".json,application/json" />
        </div>
        <div class="hint">Let backup/restore af dine lokale √¶ndringer.</div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <span class="muted">Single-file app (GitHub Pages-venlig). Ingen server. Lokal lagring.</span>
  </footer>

  <script src="app.js"></script>
</body>
</html>
